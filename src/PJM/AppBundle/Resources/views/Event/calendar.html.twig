{% extends "PJMAppBundle:Event:layout.html.twig" %}

{% block title %}Calendrier - {{ parent() }}{% endblock %}

{% block pjm_app_body_content %}
    <div class="col-md-10 col-md-push-1">
        <p><a href="{{ path('pjm_app_event_index') }}" class="btn btn-default"><span class="glyphicon glyphicon-list"></span> Liste</a></p>

        <div id="calendrier" class="calendrier-fullCalendar"></div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}

    <script type="text/javascript">
        $(document).ready(function() {
            $('#calendrier').fullCalendar({
                lang: 'fr',
                loading: function(isLoading, view) {
                    chargement(isLoading);
                },
                eventMouseover: function(event, jsEvent, view) {
                    var infos = '';

                    if (event.lieu) {
                        infos += '<strong>Lieu : </strong>' + event.lieu;
                    }

                    if (infos !== '') {
                        $(this).append('<div class="infos">' + infos + '</div>');
                    }
                },
                eventMouseout: function(event, jsEvent, view) {
                    $(this).find('div.infos').remove();
                },
                eventSources: [
                    Routing.generate('pjm_app_api_event_calendar')
                ]
            }).fullCalendar('gotoDate', '{{ defaultDate }}');
        });
    </script>
{% endblock %}
