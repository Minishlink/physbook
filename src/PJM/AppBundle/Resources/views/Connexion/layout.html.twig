{% extends "::layout.html.twig" %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('css/ext.css', 'css') }}" />
    <link rel="stylesheet" href="{{ asset('css/connexion.css', 'css') }}" />
{% endblock %}

{% block body %}

<div class="container">
    <div id="contenu" class="row vertical-center">
        <div class="sr-only">Phy'sbook</div>
        <div class="col-sm-4 col-sm-offset-4 col-xs-10 col-xs-offset-1">
            <div class="col-md-10 col-md-offset-1" id="pingouin">
                <a href="{{ path('pjm_app_homepage') }}" title="Phy'sbook">
                    <img id="pingouin-ouvert" class="img-responsive center-block tossing" src="{{ asset('images/login/pingouin_yeux_ouverts.png') }}" />
                    <img id="pingouin-ferme" class="img-responsive center-block" src="{{ asset('images/login/pingouin_yeux_caches.png') }}" />
                </a>
            </div>

            <div class="col-md-10 col-md-offset-1" id="connexion_wrapper">
                <div >
                    <div id="logo" class="fadeIn">
                        <a href="{{ path('pjm_app_homepage') }}" title="Phy'sbook"><span class="phys-brand-logo-white"></span><span class="sr-only">Phy'sbook</span></a>
                    </div>

                    {% block fos_user_content %}
                    {% endblock fos_user_content %}
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block javascripts %}
<script type="text/javascript">
$(document).ready(function () {
    // pingouin
    var $password = $('#password');
    $password.focus(function () {
        $('#pingouin-ouvert').hide(0, function () {
            $('#pingouin-ferme').show(0);
        });
    });
    $password.focusout(function () {
        $('#pingouin-ferme').hide(0, function () {
            $('#pingouin-ouvert').show(0);
        });
    });

    // indicateur de chargement
    $('form').on('submit', function(e) {
        var $this = $(this);
        var button = $(this).find('button');

        if(!button.hasClass('disabled')) {
            button.addClass('disabled');

            $('#logo').html('<span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span>');
        }
    });
});
</script>
{% endblock %}
